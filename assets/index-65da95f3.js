var nt=Object.defineProperty;var rt=(o,t,e)=>t in o?nt(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e;var x=(o,t,e)=>(rt(o,typeof t!="symbol"?t+"":t,e),e),Y=(o,t,e)=>{if(!t.has(o))throw TypeError("Cannot "+e)};var i=(o,t,e)=>(Y(o,t,"read from private field"),e?e.call(o):t.get(o)),h=(o,t,e)=>{if(t.has(o))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(o):t.set(o,e)},c=(o,t,e,n)=>(Y(o,t,"write to private field"),n?n.call(o,e):t.set(o,e),e);var d=(o,t,e)=>(Y(o,t,"access private method"),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function e(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=e(s);fetch(s.href,r)}})();var p,R,_;class ht{constructor(t=500,e=500){h(this,R);x(this,"width");x(this,"height");h(this,p,void 0);const n=document.createElement("canvas");this.width=t,this.height=e,c(this,p,n),d(this,R,_).call(this)}render(t=document.body){t.append(i(this,p))}destroy(){i(this,p).remove()}clear(){this.getContext().clearRect(0,0,this.width,this.height)}getCanvas(){return i(this,p)}getContext(){const t=i(this,p).getContext("2d");if(!t)throw new Error("Context doesn't exist");return t}setSize(t,e){this.width=t,this.height=e,d(this,R,_).call(this)}}p=new WeakMap,R=new WeakSet,_=function(){i(this,p).width=this.width,i(this,p).height=this.height};class Q{constructor({x:t=0,y:e=0,size:n=1,lineWidth:s=1,color:r="black"}={}){x(this,"x");x(this,"y");x(this,"size");x(this,"lineWidth");x(this,"color");this.x=t,this.y=e,this.size=n,this.lineWidth=s,this.color=r}render(t){throw new Error("Implement render method")}update({x:t,y:e}){this.x=t,this.y=e}move({x:t,y:e}){this.x+=t,this.y+=e}getVisibility(t){return!(this.x<-this.size||t.width+this.size<this.x||this.y<-this.size||t.height+this.size<this.y)}checkCollision(t){return this.x+this.size>=t.x&&this.x<=t.x+t.size&&this.y+this.size>=t.y&&this.y<=t.y+t.size}}class ct extends Q{constructor(t){super(t)}render(t){const e=Math.ceil(this.lineWidth/2);t.beginPath(),t.lineWidth=this.lineWidth,t.strokeStyle=this.color,t.arc(this.x+e,this.y+e,this.size/2,0,2*Math.PI),t.stroke()}}var $,D;class J extends ct{constructor(e={}){super(e);h(this,$,void 0);h(this,D,void 0);c(this,$,e.xAcceleration||1),c(this,D,e.yAcceleration||1)}move(){super.move({x:i(this,$),y:i(this,D)})}}$=new WeakMap,D=new WeakMap;const lt="/dodge/assets/star-82675554.svg";var C,v,z,M,L,g;class at extends Q{constructor({canvasSize:e,velocity:n}){super({x:e/2-8/2,y:e/2-8/2,size:8,color:"red"});h(this,C,void 0);h(this,v,void 0);h(this,z,void 0);h(this,M,void 0);h(this,L,void 0);h(this,g,void 0);c(this,L,e),c(this,g,8),c(this,v,n);const r=["ArrowUp","ArrowRight","ArrowDown","ArrowLeft"];c(this,z,{ArrowUp:!1,ArrowRight:!1,ArrowDown:!1,ArrowLeft:!1}),c(this,M,r),c(this,C,new Image(8,8)),i(this,C).src=lt}resetPosition(){super.update({x:i(this,L)/2-i(this,g)/2,y:i(this,L)/2-i(this,g)/2})}render(e){e.drawImage(i(this,C),this.x-i(this,g)/2,this.y-i(this,g)/2,i(this,g)*2,i(this,g)*2)}move(){const{ArrowUp:e,ArrowRight:n,ArrowDown:s,ArrowLeft:r}=i(this,z);e&&this.moveUp(),n&&this.moveRight(),s&&this.moveDown(),r&&this.moveLeft()}moveUp(){super.move({x:0,y:Math.min(-i(this,v))})}moveRight(){super.move({x:i(this,v),y:0})}moveDown(){super.move({x:0,y:i(this,v)})}moveLeft(){super.move({x:-i(this,v),y:0})}bindEvents(){document.addEventListener("keydown",({key:e})=>{i(this,M).includes(e)&&(i(this,z)[e]=!0)}),document.addEventListener("keyup",({key:e})=>{i(this,M).includes(e)&&(i(this,z)[e]=!1)})}}C=new WeakMap,v=new WeakMap,z=new WeakMap,M=new WeakMap,L=new WeakMap,g=new WeakMap;function I(o=0,t=1){const e=Math.ceil(o),n=Math.floor(t);return Math.floor(Math.random()*(n-e+1)+e)}function K(){return Math.random()<.5}const u=500;var B,b,a,m,y,w,A,F,S,N,q,tt,G,et,E,T,H,it,U,k,P,V,W,X;class dt{constructor(){h(this,q);h(this,G);h(this,E);h(this,H);h(this,U);h(this,P);h(this,W);h(this,B,void 0);h(this,b,void 0);h(this,a,void 0);h(this,m,void 0);h(this,y,void 0);h(this,w,void 0);h(this,A,void 0);h(this,F,void 0);h(this,S,void 0);h(this,N,void 0);const t=new ht(u,u);c(this,B,document.getElementById("app")),c(this,A,!0),c(this,N,!1),c(this,b,t),c(this,a,t.getContext()),t.render(i(this,B)),c(this,m,new at({canvasSize:u,velocity:2.5})),i(this,m).bindEvents(),d(this,W,X).call(this,"DODGE","Press space to start"),document.addEventListener("keydown",d(this,q,tt).bind(this)),c(this,y,[]),c(this,w,[]),c(this,F,0),c(this,S,0)}}B=new WeakMap,b=new WeakMap,a=new WeakMap,m=new WeakMap,y=new WeakMap,w=new WeakMap,A=new WeakMap,F=new WeakMap,S=new WeakMap,N=new WeakMap,q=new WeakSet,tt=function({key:t}){t!==" "||!i(this,A)||d(this,G,et).call(this)},G=new WeakSet,et=function(){i(this,m).resetPosition(),c(this,A,!1),c(this,S,0),c(this,y,[...Array(u/10)].map(d(this,E,T))),c(this,w,[]),d(this,P,V).call(this,0)},E=new WeakSet,T=function(){const t=K(),e=2,n=I(0,500),s=t?u+e:-e,r=K(),l=r?n:s,f=r?s:n,O=u/2;return new J({x:l,y:f,size:e,xAcceleration:I(1,3)*(l<O?1:-1),yAcceleration:I(1,3)*(f<O?1:-1),color:"#FF8551"})},H=new WeakSet,it=function(){const t=K(),e=2,n=I(0,500),s=t?u+e:-e,r=K(),l=i(this,m).x,f=i(this,m).y,O=r?n:s,Z=r?s:n,j=I(40,60),st=(l-O)/j,ot=(f-Z)/j;return new J({x:O,y:Z,size:e,xAcceleration:st,yAcceleration:ot,color:"#9AC5F4"})},U=new WeakSet,k=function(t){const e=t.checkCollision(i(this,m));t.move(),t.render(i(this,a)),e&&!i(this,N)&&c(this,A,!0)},P=new WeakSet,V=function(t,e=!1){if(i(this,A)){d(this,W,X).call(this,"Game Over","Press space to retry");return}if(t===0){window.requestAnimationFrame(l=>d(this,P,V).call(this,l,!0));return}e&&c(this,F,t),window.requestAnimationFrame(d(this,P,V).bind(this)),i(this,b).clear();const n=(t-i(this,F))/1e3,s=12,r="Helvetica, Arial, sans-serif";i(this,a).font=`${s}px ${r}`,i(this,a).fillStyle="white",i(this,a).textAlign="left",i(this,a).fillText(`${i(this,y).length} bullets`,10,u-10,u),i(this,a).textAlign="right",i(this,a).fillText(`${n.toFixed(2)}s`,u-10,u-10),i(this,m).move(),i(this,m).render(i(this,a)),2<=n-i(this,S)&&(c(this,S,n),i(this,y).push(d(this,E,T).call(this)),i(this,w).push(d(this,H,it).call(this)));for(let l=i(this,y).length-1;0<=l;--l){const f=i(this,y)[l];d(this,U,k).call(this,f),f.getVisibility(i(this,b))||(i(this,y).splice(l,1),i(this,y).push(d(this,E,T).call(this)))}for(let l=i(this,w).length-1;0<=l;--l){const f=i(this,w)[l];d(this,U,k).call(this,f),f.getVisibility(i(this,b))||i(this,w).splice(l,1)}},W=new WeakSet,X=function(t,e){const n="Helvetica, Arial, sans-serif";i(this,a).textAlign="center",i(this,a).fillStyle="white";const s=32,r=1.5,l=u/2-s*r;i(this,a).font=`${s}px ${n}`,i(this,a).fillText(t,u/2,l),e&&(i(this,a).font=`16px ${n}`,i(this,a).fillText(e,u/2,l+s*r))};new dt;
