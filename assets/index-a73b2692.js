var rt=Object.defineProperty;var ht=(n,t,e)=>t in n?rt(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var v=(n,t,e)=>(ht(n,typeof t!="symbol"?t+"":t,e),e),_=(n,t,e)=>{if(!t.has(n))throw TypeError("Cannot "+e)};var s=(n,t,e)=>(_(n,t,"read from private field"),e?e.call(n):t.get(n)),h=(n,t,e)=>{if(t.has(n))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(n):t.set(n,e)},o=(n,t,e,r)=>(_(n,t,"write to private field"),r?r.call(n,e):t.set(n,e),e);var d=(n,t,e)=>(_(n,t,"access private method"),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const c of i)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function e(i){const c={};return i.integrity&&(c.integrity=i.integrity),i.referrerPolicy&&(c.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?c.credentials="include":i.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(i){if(i.ep)return;i.ep=!0;const c=e(i);fetch(i.href,c)}})();var g,$,k;class ct{constructor(t=500,e=500){h(this,$);v(this,"width");v(this,"height");h(this,g,void 0);const r=document.createElement("canvas");this.width=t,this.height=e,o(this,g,r),d(this,$,k).call(this)}render(t=document.body){t.append(s(this,g))}destroy(){s(this,g).remove()}clear(){this.getContext().clearRect(0,0,this.width,this.height)}getCanvas(){return s(this,g)}getContext(){const t=s(this,g).getContext("2d");if(!t)throw new Error("Context doesn't exist");return t}setSize(t,e){this.width=t,this.height=e,d(this,$,k).call(this)}}g=new WeakMap,$=new WeakSet,k=function(){s(this,g).width=this.width,s(this,g).height=this.height};class tt{constructor({x:t=0,y:e=0,size:r=1,lineWidth:i=1,color:c="black"}={}){v(this,"x");v(this,"y");v(this,"size");v(this,"lineWidth");v(this,"color");this.x=t,this.y=e,this.size=r,this.lineWidth=i,this.color=c}render(t){throw new Error("Implement render method")}update({x:t,y:e}){this.x=t,this.y=e}move({x:t,y:e}){this.x+=t,this.y+=e}getVisibility(t){return!(this.x<-this.size||t.width+this.size<this.x||this.y<-this.size||t.height+this.size<this.y)}checkCollision(t){return this.x+this.size>=t.x&&this.x<=t.x+t.size&&this.y+this.size>=t.y&&this.y<=t.y+t.size}}class lt extends tt{constructor(t){super(t)}render(t){const e=Math.ceil(this.lineWidth/2);t.beginPath(),t.lineWidth=this.lineWidth,t.strokeStyle=this.color,t.arc(this.x+e,this.y+e,this.size/2,0,2*Math.PI),t.stroke()}}var D,B;class Q extends lt{constructor(e={}){super(e);h(this,D,void 0);h(this,B,void 0);o(this,D,e.xAcceleration||1),o(this,B,e.yAcceleration||1)}moveTo(e){super.move({x:s(this,D)*e,y:s(this,B)*e})}}D=new WeakMap,B=new WeakMap;const at="/dodge/assets/star-82675554.svg";var F,A,S,P,E,w;class dt extends tt{constructor({canvasSize:e,velocity:r}){super({x:e/2-8/2,y:e/2-8/2,size:8,color:"red"});h(this,F,void 0);h(this,A,void 0);h(this,S,void 0);h(this,P,void 0);h(this,E,void 0);h(this,w,void 0);o(this,E,e),o(this,w,8),o(this,A,r);const c=["ArrowUp","ArrowRight","ArrowDown","ArrowLeft"];o(this,S,{ArrowUp:!1,ArrowRight:!1,ArrowDown:!1,ArrowLeft:!1}),o(this,P,c),o(this,F,new Image(8,8)),s(this,F).src=at}resetPosition(){super.update({x:s(this,E)/2-s(this,w)/2,y:s(this,E)/2-s(this,w)/2})}render(e){e.drawImage(s(this,F),this.x-s(this,w)/2,this.y-s(this,w)/2,s(this,w)*2,s(this,w)*2)}moveTo(e){const{ArrowUp:r,ArrowRight:i,ArrowDown:c,ArrowLeft:u}=s(this,S);r&&this.moveUp(e),i&&this.moveRight(e),c&&this.moveDown(e),u&&this.moveLeft(e)}moveUp(e){super.move({x:0,y:Math.min(-s(this,A))*e})}moveRight(e){super.move({x:s(this,A)*e,y:0})}moveDown(e){super.move({x:0,y:s(this,A)*e})}moveLeft(e){super.move({x:-s(this,A)*e,y:0})}bindEvents(){document.addEventListener("keydown",({key:e})=>{s(this,P).includes(e)&&(s(this,S)[e]=!0)}),document.addEventListener("keyup",({key:e})=>{s(this,P).includes(e)&&(s(this,S)[e]=!1)})}}F=new WeakMap,A=new WeakMap,S=new WeakMap,P=new WeakMap,E=new WeakMap,w=new WeakMap;function R(n=0,t=1){const e=Math.ceil(n),r=Math.floor(t);return Math.floor(Math.random()*(r-e+1)+e)}function K(){return Math.random()<.5}const f=500;var N,C,l,y,p,x,z,M,b,L,T,G,et,H,st,O,V,Y,it,U,X,I,q,W,Z;class ut{constructor(){h(this,G);h(this,H);h(this,O);h(this,Y);h(this,U);h(this,I);h(this,W);h(this,N,void 0);h(this,C,void 0);h(this,l,void 0);h(this,y,void 0);h(this,p,void 0);h(this,x,void 0);h(this,z,void 0);h(this,M,void 0);h(this,b,void 0);h(this,L,void 0);h(this,T,void 0);const t=new ct(f,f);o(this,N,document.getElementById("app")),o(this,z,!0),o(this,T,!1),o(this,C,t),o(this,l,t.getContext()),t.render(s(this,N)),o(this,y,new dt({canvasSize:f,velocity:250})),s(this,y).bindEvents(),d(this,W,Z).call(this,"DODGE","Press space to start"),document.addEventListener("keydown",d(this,G,et).bind(this)),o(this,p,[]),o(this,x,[]),o(this,M,0),o(this,b,0),o(this,L,0)}}N=new WeakMap,C=new WeakMap,l=new WeakMap,y=new WeakMap,p=new WeakMap,x=new WeakMap,z=new WeakMap,M=new WeakMap,b=new WeakMap,L=new WeakMap,T=new WeakMap,G=new WeakSet,et=function({key:t}){t!==" "||!s(this,z)||d(this,H,st).call(this)},H=new WeakSet,st=function(){s(this,y).resetPosition(),o(this,z,!1),o(this,L,0),o(this,M,0),o(this,b,0),o(this,p,[...Array(f/10)].map(d(this,O,V))),o(this,x,[]),d(this,I,q).call(this,0)},O=new WeakSet,V=function(){const t=K(),e=2,r=R(0,500),i=t?f+e:-e,c=K(),u=c?r:i,a=c?i:r,m=f/2;return new Q({x:u,y:a,size:e,xAcceleration:R(1e3,2e3)/10*(u<m?1:-1),yAcceleration:R(1e3,2e3)/10*(a<m?1:-1),color:"#FF8551"})},Y=new WeakSet,it=function(){const t=K(),e=2,r=R(0,500),i=t?f+e:-e,c=K(),u=s(this,y).x,a=s(this,y).y,m=c?r:i,j=c?i:r,J=R(80,120)/100,ot=(u-m)/J,nt=(a-j)/J;return new Q({x:m,y:j,size:e,xAcceleration:ot,yAcceleration:nt,color:"#9AC5F4"})},U=new WeakSet,X=function(t,e){const r=t.checkCollision(s(this,y));t.moveTo(e),t.render(s(this,l)),r&&!s(this,T)&&o(this,z,!0)},I=new WeakSet,q=function(t,e=!1){if(s(this,z)){d(this,W,Z).call(this,"Game Over","Press space to retry");return}const r=(e?0:t-s(this,b))/1e3;if(o(this,b,t),t===0||s(this,b)===0){window.requestAnimationFrame(a=>d(this,I,q).call(this,a,!0));return}e&&o(this,M,t),window.requestAnimationFrame(d(this,I,q).bind(this)),s(this,C).clear();const i=(t-s(this,M))/1e3,c=12,u="Helvetica, Arial, sans-serif";s(this,l).font=`${c}px ${u}`,s(this,l).fillStyle="white",s(this,l).textAlign="left",s(this,l).fillText(`${s(this,p).length} bullets`,10,f-10,f),s(this,l).textAlign="right",s(this,l).fillText(`${i.toFixed(2)}s`,f-10,f-10),s(this,y).moveTo(r),s(this,y).render(s(this,l)),2<=i-s(this,L)&&(o(this,L,i),s(this,p).push(d(this,O,V).call(this)),s(this,x).push(d(this,Y,it).call(this)));for(let a=s(this,p).length-1;0<=a;--a){const m=s(this,p)[a];d(this,U,X).call(this,m,r),m.getVisibility(s(this,C))||(s(this,p).splice(a,1),s(this,p).push(d(this,O,V).call(this)))}for(let a=s(this,x).length-1;0<=a;--a){const m=s(this,x)[a];d(this,U,X).call(this,m,r),m.getVisibility(s(this,C))||s(this,x).splice(a,1)}},W=new WeakSet,Z=function(t,e){const r="Helvetica, Arial, sans-serif";s(this,l).textAlign="center",s(this,l).fillStyle="white";const i=32,c=1.5,u=f/2-i*c;s(this,l).font=`${i}px ${r}`,s(this,l).fillText(t,f/2,u),e&&(s(this,l).font=`16px ${r}`,s(this,l).fillText(e,f/2,u+i*c))};new ut;
