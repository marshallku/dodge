var K=Object.defineProperty;var T=(o,t,e)=>t in o?K(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e;var y=(o,t,e)=>(T(o,typeof t!="symbol"?t+"":t,e),e),F=(o,t,e)=>{if(!t.has(o))throw TypeError("Cannot "+e)};var i=(o,t,e)=>(F(o,t,"read from private field"),e?e.call(o):t.get(o)),h=(o,t,e)=>{if(t.has(o))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(o):t.set(o,e)},c=(o,t,e,r)=>(F(o,t,"write to private field"),r?r.call(o,e):t.set(o,e),e);var d=(o,t,e)=>(F(o,t,"access private method"),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function e(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(s){if(s.ep)return;s.ep=!0;const n=e(s);fetch(s.href,n)}})();var u,L,k;class V{constructor(t=500,e=500){h(this,L);y(this,"width");y(this,"height");h(this,u,void 0);const r=document.createElement("canvas");this.width=t,this.height=e,c(this,u,r),d(this,L,k).call(this)}render(t=document.body){t.append(i(this,u))}destroy(){i(this,u).remove()}clear(){this.getContext().clearRect(0,0,this.width,this.height)}getCanvas(){return i(this,u)}getContext(){const t=i(this,u).getContext("2d");if(!t)throw new Error("Context doesn't exist");return t}setSize(t,e){this.width=t,this.height=e,d(this,L,k).call(this)}}u=new WeakMap,L=new WeakSet,k=function(){i(this,u).width=this.width,i(this,u).height=this.height};class N{constructor({x:t=0,y:e=0,size:r=1,lineWidth:s=1,color:n="black"}={}){y(this,"x");y(this,"y");y(this,"size");y(this,"lineWidth");y(this,"color");this.x=t,this.y=e,this.size=r,this.lineWidth=s,this.color=n}render(t){const e=Math.ceil(this.lineWidth/2);t.beginPath(),t.lineWidth=this.lineWidth,t.strokeStyle=this.color,t.rect(this.x+e,this.y+e,this.size,this.size),t.stroke()}update({x:t,y:e}){this.x=t,this.y=e}move({x:t,y:e}){this.x+=t,this.y+=e}getVisibility(t){return!(this.x<-this.size||t.width+this.size<this.x||this.y<-this.size||t.height+this.size<this.y)}checkCollision(t){return this.x+this.size>=t.x&&this.x<=t.x+t.size&&this.y+this.size>=t.y&&this.y<=t.y+t.size}}var C,E;class G extends N{constructor(e={}){super(e);h(this,C,void 0);h(this,E,void 0);c(this,C,e.xAcceleration||1),c(this,E,e.yAcceleration||1)}move(){super.move({x:i(this,C),y:i(this,E)})}}C=new WeakMap,E=new WeakMap;var p,g,x;class Y extends N{constructor({canvasSize:e,velocity:r}){super({x:e/2-8/2,y:e/2-8/2,size:8,color:"red"});h(this,p,void 0);h(this,g,void 0);h(this,x,void 0);c(this,p,r);const n=["ArrowUp","ArrowRight","ArrowDown","ArrowLeft"];c(this,g,{ArrowUp:!1,ArrowRight:!1,ArrowDown:!1,ArrowLeft:!1}),c(this,x,n)}move(){const{ArrowUp:e,ArrowRight:r,ArrowDown:s,ArrowLeft:n}=i(this,g);e&&this.moveUp(),r&&this.moveRight(),s&&this.moveDown(),n&&this.moveLeft()}moveUp(){super.move({x:0,y:Math.min(-i(this,p))})}moveRight(){super.move({x:i(this,p),y:0})}moveDown(){super.move({x:0,y:i(this,p)})}moveLeft(){super.move({x:-i(this,p),y:0})}bindEvents(){document.addEventListener("keydown",({key:e})=>{i(this,x).includes(e)&&(i(this,g)[e]=!0)}),document.addEventListener("keyup",({key:e})=>{i(this,x).includes(e)&&(i(this,g)[e]=!1)})}}p=new WeakMap,g=new WeakMap,x=new WeakMap;function $(o=0,t=1){const e=Math.ceil(o),r=Math.floor(t);return Math.floor(Math.random()*(r-e+1)+e)}function B(){return Math.random()<.5}const f=500;var M,A,l,v,m,w,z,O,I,P,U,S,D,R,W;class Z{constructor(){h(this,O);h(this,P);h(this,S);h(this,R);h(this,M,void 0);h(this,A,void 0);h(this,l,void 0);h(this,v,void 0);h(this,m,void 0);h(this,w,void 0);h(this,z,void 0);const t=new V(f,f);c(this,M,document.getElementById("app")),c(this,w,!1),c(this,A,t),c(this,l,t.getContext()),t.render(i(this,M)),c(this,v,new Y({canvasSize:f,velocity:2.5})),i(this,v).bindEvents(),d(this,R,W).call(this,"DODGE","Press any key to start"),document.addEventListener("keydown",d(this,O,I).bind(this),{once:!0}),c(this,m,[]),c(this,z,0)}}M=new WeakMap,A=new WeakMap,l=new WeakMap,v=new WeakMap,m=new WeakMap,w=new WeakMap,z=new WeakMap,O=new WeakSet,I=function(){c(this,w,!1),c(this,m,[...Array(f/20)].map(d(this,P,U))),d(this,S,D).call(this,0)},P=new WeakSet,U=function(){const t=B(),e=5,r=$(0,500),s=t?f+e:-e,n=B();return new G({x:n?r:s,y:n?s:r,size:e,xAcceleration:$(1,3)*(t?-1:1),yAcceleration:$(1,3)*(t?-1:1),color:"white"})},S=new WeakSet,D=function(t,e=!1){if(i(this,w)){d(this,R,W).call(this,"Game Over","Press any key to retry"),document.addEventListener("keydown",d(this,O,I).bind(this),{once:!0});return}if(t===0){window.requestAnimationFrame(a=>d(this,S,D).call(this,a,!0));return}e&&c(this,z,t),window.requestAnimationFrame(d(this,S,D).bind(this)),i(this,A).clear();const r=(t-i(this,z))/1e3,s=16,n="Helvetica, Arial, sans-serif";i(this,l).fillText(r.toFixed(2),f-10,s+10),i(this,l).font=`${s}px ${n}`,i(this,l).textAlign="right",i(this,l).fillStyle="white",i(this,v).move(),i(this,v).render(i(this,l));for(let a=i(this,m).length-1;0<=a;--a){const b=i(this,m)[a],H=b.checkCollision(i(this,v));b.move(),b.render(i(this,l)),H&&c(this,w,!0),b.getVisibility(i(this,A))||(i(this,m).splice(a,1),i(this,m).push(d(this,P,U).call(this)))}},R=new WeakSet,W=function(t,e){const r="Helvetica, Arial, sans-serif";i(this,l).textAlign="center",i(this,l).fillStyle="white";const s=32,n=1.5,a=f/2-s*n;i(this,l).font=`${s}px ${r}`,i(this,l).fillText(t,f/2,a),e&&(i(this,l).font=`16px ${r}`,i(this,l).fillText(e,f/2,a+s*n))};new Z;
