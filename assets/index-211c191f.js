var rt=Object.defineProperty;var ct=(n,t,e)=>t in n?rt(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var v=(n,t,e)=>(ct(n,typeof t!="symbol"?t+"":t,e),e),k=(n,t,e)=>{if(!t.has(n))throw TypeError("Cannot "+e)};var i=(n,t,e)=>(k(n,t,"read from private field"),e?e.call(n):t.get(n)),r=(n,t,e)=>{if(t.has(n))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(n):t.set(n,e)},h=(n,t,e,o)=>(k(n,t,"write to private field"),o?o.call(n,e):t.set(n,e),e);var u=(n,t,e)=>(k(n,t,"access private method"),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const c of s)if(c.type==="childList")for(const a of c.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function e(s){const c={};return s.integrity&&(c.integrity=s.integrity),s.referrerPolicy&&(c.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?c.credentials="include":s.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function o(s){if(s.ep)return;s.ep=!0;const c=e(s);fetch(s.href,c)}})();var g,D,X;class lt{constructor(t=500,e=500){r(this,D);v(this,"width");v(this,"height");r(this,g,void 0);const o=document.createElement("canvas");this.width=t,this.height=e,h(this,g,o),u(this,D,X).call(this)}render(t=document.body){t.append(i(this,g))}destroy(){i(this,g).remove()}clear(){this.getContext().clearRect(0,0,this.width,this.height)}getCanvas(){return i(this,g)}getContext(){const t=i(this,g).getContext("2d");if(!t)throw new Error("Context doesn't exist");return t}setSize(t,e){this.width=t,this.height=e,u(this,D,X).call(this)}}g=new WeakMap,D=new WeakSet,X=function(){i(this,g).width=this.width,i(this,g).height=this.height};class et{constructor({x:t=0,y:e=0,size:o=1,lineWidth:s=1,color:c="black"}={}){v(this,"x");v(this,"y");v(this,"size");v(this,"lineWidth");v(this,"color");this.x=t,this.y=e,this.size=o,this.lineWidth=s,this.color=c}render(t){throw new Error("Implement render method")}update({x:t,y:e}){this.x=t,this.y=e}move({x:t,y:e},o){if(o){this.x=Math.min(Math.max(0,this.x+t),o.x-this.size),this.y=Math.min(Math.max(0,this.y+e),o.y-this.size);return}this.x+=t,this.y+=e}getVisibility(t){return!(this.x<-this.size||t.width+this.size<this.x||this.y<-this.size||t.height+this.size<this.y)}checkCollision(t){return this.x+this.size>=t.x&&this.x<=t.x+t.size&&this.y+this.size>=t.y&&this.y<=t.y+t.size}}class at extends et{constructor(t){super(t)}render(t){const e=Math.ceil(this.lineWidth/2);t.beginPath(),t.lineWidth=this.lineWidth,t.strokeStyle=this.color,t.arc(this.x+e,this.y+e,this.size/2,0,2*Math.PI),t.stroke()}}var B,N;class tt extends at{constructor(e={}){super(e);r(this,B,void 0);r(this,N,void 0);h(this,B,e.xAcceleration||1),h(this,N,e.yAcceleration||1)}moveTo(e){super.move({x:i(this,B)*e,y:i(this,N)*e})}}B=new WeakMap,N=new WeakMap;const dt="/dodge/assets/star-82675554.svg";var P,A,M,E,O,z,x;class ut extends et{constructor({canvasSize:e,velocity:o,boundary:s}){super({x:e/2-8/2,y:e/2-8/2,size:8,color:"red"});r(this,P,void 0);r(this,A,void 0);r(this,M,void 0);r(this,E,void 0);r(this,O,void 0);r(this,z,void 0);r(this,x,void 0);h(this,O,e),h(this,x,8),h(this,A,o),h(this,z,s);const a=["ArrowUp","ArrowRight","ArrowDown","ArrowLeft"];h(this,M,{ArrowUp:!1,ArrowRight:!1,ArrowDown:!1,ArrowLeft:!1}),h(this,E,a),h(this,P,new Image(8,8)),i(this,P).src=dt}resetPosition(){super.update({x:i(this,O)/2-i(this,x)/2,y:i(this,O)/2-i(this,x)/2})}render(e){e.drawImage(i(this,P),this.x-i(this,x)/2,this.y-i(this,x)/2,i(this,x)*2,i(this,x)*2)}moveTo(e){const{ArrowUp:o,ArrowRight:s,ArrowDown:c,ArrowLeft:a}=i(this,M);o&&this.moveUp(e),s&&this.moveRight(e),c&&this.moveDown(e),a&&this.moveLeft(e)}moveUp(e){super.move({x:0,y:Math.min(-i(this,A))*e},i(this,z))}moveRight(e){super.move({x:i(this,A)*e,y:0},i(this,z))}moveDown(e){super.move({x:0,y:i(this,A)*e},i(this,z))}moveLeft(e){super.move({x:-i(this,A)*e,y:0},i(this,z))}bindEvents(){document.addEventListener("keydown",({key:e})=>{i(this,E).includes(e)&&(i(this,M)[e]=!0)}),document.addEventListener("keyup",({key:e})=>{i(this,E).includes(e)&&(i(this,M)[e]=!1)})}}P=new WeakMap,A=new WeakMap,M=new WeakMap,E=new WeakMap,O=new WeakMap,z=new WeakMap,x=new WeakMap;function $(n=0,t=1){const e=Math.ceil(n),o=Math.floor(t);return Math.floor(Math.random()*(o-e+1)+e)}function V(){return Math.random()<.5}const f=500;var T,C,l,y,p,w,b,L,S,F,U,H,it,Y,st,I,q,_,ot,W,Z,R,G,K,j;class ft{constructor(){r(this,H);r(this,Y);r(this,I);r(this,_);r(this,W);r(this,R);r(this,K);r(this,T,void 0);r(this,C,void 0);r(this,l,void 0);r(this,y,void 0);r(this,p,void 0);r(this,w,void 0);r(this,b,void 0);r(this,L,void 0);r(this,S,void 0);r(this,F,void 0);r(this,U,void 0);const t=new lt(f,f);h(this,T,document.getElementById("app")),h(this,b,!0),h(this,U,!1),h(this,C,t),h(this,l,t.getContext()),t.render(i(this,T)),h(this,y,new ut({canvasSize:f,velocity:250,boundary:{x:f,y:f}})),i(this,y).bindEvents(),u(this,K,j).call(this,"DODGE","Press space to start"),document.addEventListener("keydown",u(this,H,it).bind(this)),h(this,p,[]),h(this,w,[]),h(this,L,0),h(this,S,0),h(this,F,0)}}T=new WeakMap,C=new WeakMap,l=new WeakMap,y=new WeakMap,p=new WeakMap,w=new WeakMap,b=new WeakMap,L=new WeakMap,S=new WeakMap,F=new WeakMap,U=new WeakMap,H=new WeakSet,it=function({key:t}){t!==" "||!i(this,b)||u(this,Y,st).call(this)},Y=new WeakSet,st=function(){i(this,y).resetPosition(),h(this,b,!1),h(this,F,0),h(this,L,0),h(this,S,0),h(this,p,[...Array(f/10)].map(u(this,I,q))),h(this,w,[]),u(this,R,G).call(this,0)},I=new WeakSet,q=function(){const t=V(),e=2,o=$(0,500),s=t?f+e:-e,c=V(),a=c?o:s,d=c?s:o,m=f/2;return new tt({x:a,y:d,size:e,xAcceleration:$(1e3,2e3)/10*(a<m?1:-1),yAcceleration:$(1e3,2e3)/10*(d<m?1:-1),color:"#FF8551"})},_=new WeakSet,ot=function(){const t=V(),e=2,o=$(0,500),s=t?f+e:-e,c=V(),a=i(this,y).x,d=i(this,y).y,m=c?o:s,J=c?s:o,Q=$(80,120)/100,ht=(a-m)/Q,nt=(d-J)/Q;return new tt({x:m,y:J,size:e,xAcceleration:ht,yAcceleration:nt,color:"#9AC5F4"})},W=new WeakSet,Z=function(t,e){const o=t.checkCollision(i(this,y));t.moveTo(e),t.render(i(this,l)),o&&!i(this,U)&&h(this,b,!0)},R=new WeakSet,G=function(t,e=!1){if(i(this,b)){u(this,K,j).call(this,"Game Over","Press space to retry");return}const o=(e?0:t-i(this,S))/1e3;if(h(this,S,t),t===0||i(this,S)===0){window.requestAnimationFrame(d=>u(this,R,G).call(this,d,!0));return}e&&h(this,L,t),window.requestAnimationFrame(u(this,R,G).bind(this)),i(this,C).clear();const s=(t-i(this,L))/1e3,c=12,a="Helvetica, Arial, sans-serif";i(this,l).font=`${c}px ${a}`,i(this,l).fillStyle="white",i(this,l).textAlign="left",i(this,l).fillText(`${i(this,p).length} bullets`,10,f-10,f),i(this,l).textAlign="right",i(this,l).fillText(`${s.toFixed(2)}s`,f-10,f-10),i(this,y).moveTo(o),i(this,y).render(i(this,l)),2<=s-i(this,F)&&(h(this,F,s),i(this,p).push(u(this,I,q).call(this)),i(this,w).push(u(this,_,ot).call(this)));for(let d=i(this,p).length-1;0<=d;--d){const m=i(this,p)[d];u(this,W,Z).call(this,m,o),m.getVisibility(i(this,C))||(i(this,p).splice(d,1),i(this,p).push(u(this,I,q).call(this)))}for(let d=i(this,w).length-1;0<=d;--d){const m=i(this,w)[d];u(this,W,Z).call(this,m,o),m.getVisibility(i(this,C))||i(this,w).splice(d,1)}},K=new WeakSet,j=function(t,e){const o="Helvetica, Arial, sans-serif";i(this,l).textAlign="center",i(this,l).fillStyle="white";const s=32,c=1.5,a=f/2-s*c;i(this,l).font=`${s}px ${o}`,i(this,l).fillText(t,f/2,a),e&&(i(this,l).font=`16px ${o}`,i(this,l).fillText(e,f/2,a+s*c))};new ft;
