var _=Object.defineProperty;var Y=(s,t,e)=>t in s?_(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var p=(s,t,e)=>(Y(s,typeof t!="symbol"?t+"":t,e),e),k=(s,t,e)=>{if(!t.has(s))throw TypeError("Cannot "+e)};var i=(s,t,e)=>(k(s,t,"read from private field"),e?e.call(s):t.get(s)),n=(s,t,e)=>{if(t.has(s))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(s):t.set(s,e)},c=(s,t,e,o)=>(k(s,t,"write to private field"),o?o.call(s,e):t.set(s,e),e);var d=(s,t,e)=>(k(s,t,"access private method"),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const h of r)if(h.type==="childList")for(const a of h.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function e(r){const h={};return r.integrity&&(h.integrity=r.integrity),r.referrerPolicy&&(h.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?h.credentials="include":r.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function o(r){if(r.ep)return;r.ep=!0;const h=e(r);fetch(r.href,h)}})();var m,M,B;class Z{constructor(t=500,e=500){n(this,M);p(this,"width");p(this,"height");n(this,m,void 0);const o=document.createElement("canvas");this.width=t,this.height=e,c(this,m,o),d(this,M,B).call(this)}render(t=document.body){t.append(i(this,m))}destroy(){i(this,m).remove()}clear(){this.getContext().clearRect(0,0,this.width,this.height)}getCanvas(){return i(this,m)}getContext(){const t=i(this,m).getContext("2d");if(!t)throw new Error("Context doesn't exist");return t}setSize(t,e){this.width=t,this.height=e,d(this,M,B).call(this)}}m=new WeakMap,M=new WeakSet,B=function(){i(this,m).width=this.width,i(this,m).height=this.height};class T{constructor({x:t=0,y:e=0,size:o=1,lineWidth:r=1,color:h="black"}={}){p(this,"x");p(this,"y");p(this,"size");p(this,"lineWidth");p(this,"color");this.x=t,this.y=e,this.size=o,this.lineWidth=r,this.color=h}render(t){throw new Error("Implement render method")}update({x:t,y:e}){this.x=t,this.y=e}move({x:t,y:e}){this.x+=t,this.y+=e}getVisibility(t){return!(this.x<-this.size||t.width+this.size<this.x||this.y<-this.size||t.height+this.size<this.y)}checkCollision(t){return this.x+this.size>=t.x&&this.x<=t.x+t.size&&this.y+this.size>=t.y&&this.y<=t.y+t.size}}class j extends T{constructor(t){super(t)}render(t){const e=Math.ceil(this.lineWidth/2);t.beginPath(),t.lineWidth=this.lineWidth,t.strokeStyle=this.color,t.arc(this.x+e,this.y+e,this.size/2,0,2*Math.PI),t.stroke()}}class J extends T{constructor(t){super(t)}render(t){const e=Math.ceil(this.lineWidth/2);t.beginPath(),t.lineWidth=this.lineWidth,t.strokeStyle=this.color,t.rect(this.x+e,this.y+e,this.size,this.size),t.stroke()}}var O,R;class Q extends j{constructor(e={}){super(e);n(this,O,void 0);n(this,R,void 0);c(this,O,e.xAcceleration||1),c(this,R,e.yAcceleration||1)}move(){super.move({x:i(this,O),y:i(this,R)})}}O=new WeakMap,R=new WeakMap;var w,v,A,z,S;class X extends J{constructor({canvasSize:e,velocity:o}){super({x:e/2-8/2,y:e/2-8/2,size:8,color:"red"});n(this,w,void 0);n(this,v,void 0);n(this,A,void 0);n(this,z,void 0);n(this,S,void 0);c(this,z,e),c(this,S,8),c(this,w,o);const h=["ArrowUp","ArrowRight","ArrowDown","ArrowLeft"];c(this,v,{ArrowUp:!1,ArrowRight:!1,ArrowDown:!1,ArrowLeft:!1}),c(this,A,h)}resetPosition(){super.update({x:i(this,z)/2-i(this,S)/2,y:i(this,z)/2-i(this,S)/2})}move(){const{ArrowUp:e,ArrowRight:o,ArrowDown:r,ArrowLeft:h}=i(this,v);e&&this.moveUp(),o&&this.moveRight(),r&&this.moveDown(),h&&this.moveLeft()}moveUp(){super.move({x:0,y:Math.min(-i(this,w))})}moveRight(){super.move({x:i(this,w),y:0})}moveDown(){super.move({x:0,y:i(this,w)})}moveLeft(){super.move({x:-i(this,w),y:0})}bindEvents(){document.addEventListener("keydown",({key:e})=>{i(this,A).includes(e)&&(i(this,v)[e]=!0)}),document.addEventListener("keyup",({key:e})=>{i(this,A).includes(e)&&(i(this,v)[e]=!1)})}}w=new WeakMap,v=new WeakMap,A=new WeakMap,z=new WeakMap,S=new WeakMap;function q(s=0,t=1){const e=Math.ceil(s),o=Math.floor(t);return Math.floor(Math.random()*(o-e+1)+e)}function N(){return Math.random()<.5}const u=500;var F,b,l,y,f,g,L,x,I,G,U,H,C,$,P,D,W,K;class tt{constructor(){n(this,I);n(this,U);n(this,C);n(this,P);n(this,W);n(this,F,void 0);n(this,b,void 0);n(this,l,void 0);n(this,y,void 0);n(this,f,void 0);n(this,g,void 0);n(this,L,void 0);n(this,x,void 0);const t=new Z(u,u);c(this,F,document.getElementById("app")),c(this,g,!0),c(this,b,t),c(this,l,t.getContext()),t.render(i(this,F)),c(this,y,new X({canvasSize:u,velocity:2.5})),i(this,y).bindEvents(),d(this,W,K).call(this,"DODGE","Press space to start"),document.addEventListener("keydown",d(this,I,G).bind(this)),c(this,f,[]),c(this,L,0),c(this,x,0)}}F=new WeakMap,b=new WeakMap,l=new WeakMap,y=new WeakMap,f=new WeakMap,g=new WeakMap,L=new WeakMap,x=new WeakMap,I=new WeakSet,G=function({key:t}){t!==" "||!i(this,g)||d(this,U,H).call(this)},U=new WeakSet,H=function(){i(this,y).resetPosition(),c(this,g,!1),c(this,x,0),c(this,f,[...Array(u/10)].map(d(this,C,$))),d(this,P,D).call(this,0)},C=new WeakSet,$=function(){const t=N(),e=2,o=q(0,500),r=t?u+e:-e,h=N();return new Q({x:h?o:r,y:h?r:o,size:e,xAcceleration:q(1,3)*(t?-1:1),yAcceleration:q(1,3)*(t?-1:1),color:"white"})},P=new WeakSet,D=function(t,e=!1){if(i(this,g)){d(this,W,K).call(this,"Game Over","Press space to retry");return}if(t===0){window.requestAnimationFrame(a=>d(this,P,D).call(this,a,!0));return}e&&c(this,L,t),window.requestAnimationFrame(d(this,P,D).bind(this)),i(this,b).clear();const o=(t-i(this,L))/1e3,r=12,h="Helvetica, Arial, sans-serif";i(this,l).font=`${r}px ${h}`,i(this,l).fillStyle="white",i(this,l).textAlign="left",i(this,l).fillText(`${i(this,f).length} bullets`,10,u-10,u),i(this,l).textAlign="right",i(this,l).fillText(`${o.toFixed(2)}s`,u-10,u-10),i(this,y).move(),i(this,y).render(i(this,l)),5<=o-i(this,x)&&(c(this,x,o),i(this,f).push(d(this,C,$).call(this)));for(let a=i(this,f).length-1;0<=a;--a){const E=i(this,f)[a],V=E.checkCollision(i(this,y));E.move(),E.render(i(this,l)),V&&c(this,g,!0),E.getVisibility(i(this,b))||(i(this,f).splice(a,1),i(this,f).push(d(this,C,$).call(this)))}},W=new WeakSet,K=function(t,e){const o="Helvetica, Arial, sans-serif";i(this,l).textAlign="center",i(this,l).fillStyle="white";const r=32,h=1.5,a=u/2-r*h;i(this,l).font=`${r}px ${o}`,i(this,l).fillText(t,u/2,a),e&&(i(this,l).font=`16px ${o}`,i(this,l).fillText(e,u/2,a+r*h))};new tt;
